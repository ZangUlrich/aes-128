#include <stdlib.h>
#include <stdio.h>
#include "aes.h"




int main(int argc, char *argv[]) {

	/* Initialisation de sbox
	uint8_t *sbox = malloc(sizeof(uint8_t) * 256);

	initialize_aes_sbox(sbox);

	for (int i = 0; i < 256; ++i) {
		printf("0x%x ", sbox[i]);
	}

	free(sbox);
	//*/

	/*Master key
	uint8_t masterKey[4][4] = {
		{0x2b, 0x28, 0xab, 0x09},
		{0x7e, 0xae, 0xf7, 0xcf},
		{0x15, 0xd2, 0x15, 0x4f},
		{0x16, 0xa6, 0x88, 0x3c}
	};*/

	uint8_t key[DATA_SIZE] = {0x2b,0x7e,0x15,0x16, 0x28,0xae,0xd2,0xa6, 0xab,0xf7,0x15,0x88,  0x09,0xcf,0x4f,0x3c};

	uint8_t *ciphertext;

	ciphertext = malloc(sizeof(uint8_t)*DATA_SIZE);


	uint8_t plaintext[DATA_SIZE] = {0x32,0x43,0xf6,0xa8,  0x88,0x5a,0x30,0x8d,   0x31,0x31,0x98,0xa2,   0xe0,0x37,0x07,0x34};

	AESEncrypt(ciphertext, plaintext, key);



	free(ciphertext);
	



	//KeyGen(roundKeys, masterKey);

	/*uint8_t state_initial[4][4] = {
		{0x4, 0x66, 0x81, 0xe5},
		{0xe0, 0xcb, 0x19, 0x9a},
		{0x48, 0xf8, 0xd3, 0x7a},
		{0x28, 0x06, 0x26, 0x4c}
	};
*/

	/*uint8_t state_initial[4][4] = {
		{0x19, 0x3d, 0xe3, 0xbe},
		{0xa0, 0xf4, 0xe2, 0x2b},
		{0x9a, 0xc6, 0x8d, 0x2a},
		{0xe9, 0xf8, 0x48, 0x08}
	};*/


	/*uint8_t state_initial[4][4] = {
		{0x32, 0x43, 0xf6, 0xa8},
		{0x88, 0x5a, 0x30, 0x8d},
		{0x31, 0x31, 0x98, 0xa2},
		{0xe0, 0x37, 0x07, 0x34}
	};*/
	/*
	for (int i = 0; i < STATE_ROW_SIZE; ++i) {
		for (int j = 0; j < STATE_COL_SIZE; ++j) {
			state[j][i] = state_initial[j][i];
		}
	}

	printf("Initial state\n");
	affiche_state(state);

	AESEncrypt_state(state, roundKeys);

	affiche_state(state);





	//affiche(roundKeys);*/


	


	

	return 0;
}
